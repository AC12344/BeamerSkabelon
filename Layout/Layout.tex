%===========================================================================
%=================== Setup fancy page counter ==============================
%===========================================================================
\usepackage{tikz}

\definecolor{color1}{RGB}{193,193,204}
\definecolor{color2}{RGB}{255,255,255}
\definecolor{color3}{RGB}{83,96,109}

\newcounter{totavalue}

\def\aux{1}
\def\radius{19pt}
\def\thickness{2pt}
\def\logoscale{26pt}

\newcommand\circcounteri{%
\ifnum\insertdocumentendpage<2\relax
\else
  \setcounter{totavalue}{\insertdocumentendpage}%
\fi%
\pgfmathsetmacro{\aux}{360/\thetotavalue}%
\begin{tikzpicture}[overlay]
	\fill[color1]
		circle (\radius+1pt);
	\fill[color2]
		circle (\radius-1pt-\thickness);
	\fill[black] 
		(0:\radius)
		arc  (0:\insertpagenumber*\aux:\radius)
		arc  (\insertpagenumber*\aux:180+\insertpagenumber*\aux:\thickness/2)
		arc  (\insertpagenumber*\aux:0:\radius-\thickness) -- cycle;
	\node[inner sep=0pt] at (0,0) 
		{\includegraphics[width=\logoscale]{Layout/SDU_BLACK.pdf}};
	\fill[color1]
		(0:\radius) circle(5pt);
	\fill[color2]
		(0:\radius) circle(4pt);
	\node[font=\color{color3}] at (\radius,0) {\insertpagenumber};
\end{tikzpicture}%
}

\setbeamertemplate{headline}{%
	\begin{tikzpicture}[node distance=.5cm]
		\node[inner sep=0pt] at (0,0)
			{\includegraphics[width=\textwidth]{Layout/TekniskFakultet2edit.png}};
		\node[inner sep=0pt] at (7cm+2pt,0)
			{\circcounteri};
		\node[font=\color{white}, align=left, anchor=north west] (section) at (-7.5cm,15pt) 
			{%
				\huge{\insertsection}\\
				\large{\insertsubsection}
			};
	\end{tikzpicture}%
}
